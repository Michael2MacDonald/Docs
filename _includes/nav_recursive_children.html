{%- assign node = child -%}

{%- if node.has_children -%}
  {%- assign children_list = pages_list | where: "parent", node.title -%}
  <ul class="nav-list ">
  {%- for child in children_list -%}
    {%- unless child.nav_exclude -%}

    {%- assign active = false -%}
    {%- for check_parent in page.parents -%}
      {{ check_parent.title }}
      {%- if child.title == check_parent.title -%}
        {%- assign active = true -%}
      {%- endif -%}
    {%- endfor -%}

    <li class="nav-list-item {% if page.url == child.url or active == true or page.parent == child.title %} active{% endif %}">
      {%- if child.has_children -%}
        <a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a>
      {%- endif -%}
      <a href="{{ node.url | absolute_url }}" class="nav-list-link{% if page.url == child.url %} active{% endif %}">{{ child.title }}</a>
      {{ include nav_recursive_children.html }}
    </li>
    {%- endunless -%}
  {%- endfor -%}
  </ul>
{%- endif -%}
